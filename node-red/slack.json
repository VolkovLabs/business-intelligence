[
  {
    "id": "8a85552c35acc9b0",
    "type": "tab",
    "label": "Slack",
    "disabled": false,
    "info": "",
    "env": []
  },
  {
    "id": "1",
    "type": "http in",
    "z": "8a85552c35acc9b0",
    "name": "Slack Trigger /slack",
    "url": "/slack",
    "method": "post",
    "upload": false,
    "swaggerDoc": "",
    "x": 150,
    "y": 440,
    "wires": [["5", "eb126e81a617c09e", "75dcf1fc6f614cc0"]],
    "outputLabels": ["event"]
  },
  {
    "id": "5",
    "type": "debug",
    "z": "8a85552c35acc9b0",
    "d": true,
    "name": "Show Payload",
    "active": true,
    "tosidebar": true,
    "console": true,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 400,
    "y": 280,
    "wires": []
  },
  {
    "id": "6",
    "type": "catch",
    "z": "8a85552c35acc9b0",
    "name": "Error Catch",
    "scope": null,
    "uncaught": false,
    "x": 390,
    "y": 600,
    "wires": [["b2ab0f537ededb34", "6763322db783c6fc"]]
  },
  {
    "id": "eb126e81a617c09e",
    "type": "debug",
    "z": "8a85552c35acc9b0",
    "d": true,
    "name": "Show Headers",
    "active": true,
    "tosidebar": true,
    "console": true,
    "tostatus": false,
    "complete": "req.headers",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 410,
    "y": 220,
    "wires": []
  },
  {
    "id": "94da7fb700cc4a3f",
    "type": "function",
    "z": "8a85552c35acc9b0",
    "name": "Response status",
    "func": "/**\n * Ok\n */\nif (msg.payload.ok) {\n   msg.statusCode = 200;\n   return msg;\n}\n\n/**\n * Error\n */\nmsg.statusCode = 400;\n\nreturn msg;",
    "outputs": 1,
    "timeout": 0,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 1350,
    "y": 500,
    "wires": [["619543842bde9038"]]
  },
  {
    "id": "619543842bde9038",
    "type": "http response",
    "z": "8a85552c35acc9b0",
    "name": "Response",
    "statusCode": "",
    "headers": {},
    "x": 2380,
    "y": 500,
    "wires": []
  },
  {
    "id": "b2ab0f537ededb34",
    "type": "http response",
    "z": "8a85552c35acc9b0",
    "name": "Error Response",
    "statusCode": "400",
    "headers": {},
    "x": 2400,
    "y": 600,
    "wires": []
  },
  {
    "id": "75dcf1fc6f614cc0",
    "type": "function",
    "z": "8a85552c35acc9b0",
    "name": "Prepare Payload",
    "func": "/**\n * Panel Screenshot\n */\nlet image = msg.payload.event.condition?.panelScreenshot || \"\";\nlet title = msg.payload.event.alert?.title || \"Screenshot\";\n\n/**\n * Payload\n */\nmsg.payload = {\n    channel_id: msg.req.headers.channel_id,\n    text: msg.payload.message,\n    title,\n    image\n};\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 400,
    "y": 440,
    "wires": [["2297a0002e0a8e70", "a4a38a3ae7a16b9f"]]
  },
  {
    "id": "2297a0002e0a8e70",
    "type": "switch",
    "z": "8a85552c35acc9b0",
    "name": "Check Image",
    "property": "payload.image",
    "propertyType": "msg",
    "rules": [
      {
        "t": "nempty"
      },
      {
        "t": "else"
      }
    ],
    "checkall": "true",
    "repair": false,
    "outputs": 2,
    "x": 630,
    "y": 440,
    "wires": [["3315f76aec246824"], ["5263b0722fb26a40"]]
  },
  {
    "id": "5263b0722fb26a40",
    "type": "function",
    "z": "8a85552c35acc9b0",
    "name": "Set Message",
    "func": "/**\n * Payload\n */\nmsg.payload = {\n    channel: msg.payload.channel_id,\n    text: msg.payload.text\n};\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 850,
    "y": 500,
    "wires": [["d51dd779c9c60c8d"]]
  },
  {
    "id": "d51dd779c9c60c8d",
    "type": "http request",
    "z": "8a85552c35acc9b0",
    "name": "Send to Slack",
    "method": "POST",
    "ret": "obj",
    "paytoqs": "ignore",
    "url": "https://slack.com/api/chat.postMessage",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "bearer",
    "senderr": false,
    "headers": [
      {
        "keyType": "other",
        "keyValue": "Content-Type",
        "valueType": "other",
        "valueValue": "application/json; charset=utf-8"
      }
    ],
    "x": 1100,
    "y": 500,
    "wires": [["94da7fb700cc4a3f", "2a35fac1ee75215a"]]
  },
  {
    "id": "6763322db783c6fc",
    "type": "debug",
    "z": "8a85552c35acc9b0",
    "name": "Show Catched Error",
    "active": true,
    "tosidebar": false,
    "console": true,
    "tostatus": false,
    "complete": "error",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 660,
    "y": 680,
    "wires": []
  },
  {
    "id": "a4a38a3ae7a16b9f",
    "type": "debug",
    "z": "8a85552c35acc9b0",
    "d": true,
    "name": "Show Prepared Payload",
    "active": true,
    "tosidebar": true,
    "console": true,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 670,
    "y": 280,
    "wires": []
  },
  {
    "id": "2a35fac1ee75215a",
    "type": "debug",
    "z": "8a85552c35acc9b0",
    "d": true,
    "name": "Show Upload URL",
    "active": true,
    "tosidebar": true,
    "console": true,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 1360,
    "y": 280,
    "wires": []
  },
  {
    "id": "fb9909a3294b9744",
    "type": "http request",
    "z": "8a85552c35acc9b0",
    "name": "Get Upload URL",
    "method": "GET",
    "ret": "obj",
    "paytoqs": "query",
    "url": "https://slack.com/api/files.getUploadURLExternal",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "bearer",
    "senderr": false,
    "headers": [
      {
        "keyType": "other",
        "keyValue": "Content-Type",
        "valueType": "other",
        "valueValue": "application/json; charset=utf-8"
      }
    ],
    "x": 1100,
    "y": 360,
    "wires": [["89ee4e8ad78cdf38", "2a35fac1ee75215a"]]
  },
  {
    "id": "89ee4e8ad78cdf38",
    "type": "function",
    "z": "8a85552c35acc9b0",
    "name": "Set Upload File Payload",
    "func": "if (msg.payload.ok) {\n    flow.set('file_id', msg.payload.file_id);\n\n    msg.url = msg.payload.upload_url;\n    msg.payload = flow.get('file');\n    \n    return msg;\n}\n\nthrow \"Failed to get upload URL\";",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 1370,
    "y": 360,
    "wires": [["6cebf006a77927fc"]]
  },
  {
    "id": "6cebf006a77927fc",
    "type": "http request",
    "z": "8a85552c35acc9b0",
    "name": "Upload File to URL",
    "method": "POST",
    "ret": "txt",
    "paytoqs": "ignore",
    "url": "",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "bearer",
    "senderr": false,
    "headers": [
      {
        "keyType": "other",
        "keyValue": "Content-Type",
        "valueType": "other",
        "valueValue": "application/octet-stream"
      }
    ],
    "x": 1630,
    "y": 360,
    "wires": [["4eb1cd4c4539fa33", "0e0569beb8bf42c5"]]
  },
  {
    "id": "e760d3e321e1f78e",
    "type": "inject",
    "z": "8a85552c35acc9b0",
    "name": "Send Message",
    "props": [
      {
        "p": "req.headers.channel_id",
        "v": "C064838V2RZ",
        "vt": "str"
      },
      {
        "p": "payload.message",
        "v": "Test",
        "vt": "str"
      },
      {
        "p": "payload.event",
        "v": "{}",
        "vt": "json"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "x": 160,
    "y": 220,
    "wires": [["75dcf1fc6f614cc0"]]
  },
  {
    "id": "ca140e1d0d059a6b",
    "type": "inject",
    "z": "8a85552c35acc9b0",
    "name": "Send Image",
    "props": [
      {
        "p": "req.headers.channel_id",
        "v": "C064838V2RZ",
        "vt": "str"
      },
      {
        "p": "payload.message",
        "v": "Test",
        "vt": "str"
      },
      {
        "p": "payload.event.alert.title",
        "v": "Title",
        "vt": "str"
      },
      {
        "p": "payload.event.condition.panelScreenshot",
        "v": "data:image/png;base64,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",
        "vt": "str"
      }
    ],
    "repeat": "",
    "crontab": "",
    "once": false,
    "onceDelay": 0.1,
    "topic": "",
    "x": 170,
    "y": 280,
    "wires": [["75dcf1fc6f614cc0"]]
  },
  {
    "id": "6dea017033cc3095",
    "type": "http request",
    "z": "8a85552c35acc9b0",
    "name": "Complete Upload",
    "method": "POST",
    "ret": "obj",
    "paytoqs": "query",
    "url": "https://slack.com/api/files.completeUploadExternal",
    "tls": "",
    "persist": false,
    "proxy": "",
    "insecureHTTPParser": false,
    "authType": "bearer",
    "senderr": false,
    "headers": [
      {
        "keyType": "other",
        "keyValue": "Content-Type",
        "valueType": "other",
        "valueValue": "application/json; charset=utf-8"
      }
    ],
    "x": 2150,
    "y": 360,
    "wires": [["619543842bde9038", "abceb70cd342dab3"]]
  },
  {
    "id": "4eb1cd4c4539fa33",
    "type": "function",
    "z": "8a85552c35acc9b0",
    "name": "Set Complete Payload",
    "func": "/**\n * Payload\n */\nmsg.payload = {\n    initial_comment: flow.get('initial_comment'),\n    channel_id: flow.get('channel_id'),\n    files: [{id: flow.get('file_id'), title: flow.get('title')}]\n};\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 1900,
    "y": 360,
    "wires": [["6dea017033cc3095"]]
  },
  {
    "id": "0e0569beb8bf42c5",
    "type": "debug",
    "z": "8a85552c35acc9b0",
    "d": true,
    "name": "Show Uploaded File Response",
    "active": true,
    "tosidebar": true,
    "console": true,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 1940,
    "y": 280,
    "wires": []
  },
  {
    "id": "abceb70cd342dab3",
    "type": "debug",
    "z": "8a85552c35acc9b0",
    "d": true,
    "name": "Show Complete Response",
    "active": true,
    "tosidebar": true,
    "console": true,
    "tostatus": false,
    "complete": "payload",
    "targetType": "msg",
    "statusVal": "",
    "statusType": "auto",
    "x": 2440,
    "y": 360,
    "wires": []
  },
  {
    "id": "3315f76aec246824",
    "type": "function",
    "z": "8a85552c35acc9b0",
    "name": "Set Upload URL Payload",
    "func": "/**\n * Convert Base64 to Buffer\n */\nlet file = msg.payload.image;\nfile = file.substring(file.indexOf(',') + 1);\nfile = Buffer.from(file, 'base64');\n\n/**\n * Flow\n */\nflow.set('initial_comment', msg.payload.text)\nflow.set('channel_id', msg.payload.channel_id);\nflow.set('title', `${msg.payload.title}.png`);\nflow.set('file', file)\n\n/**\n * Payload\n */\nmsg.payload = {\n    filename: msg.payload.title,\n    length: file.length,\n    filetype: \"png\"\n};\n\nreturn msg;",
    "outputs": 1,
    "timeout": "",
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": [],
    "x": 870,
    "y": 400,
    "wires": [["fb9909a3294b9744"]]
  }
]
